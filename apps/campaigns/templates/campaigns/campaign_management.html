{% extends 'base.html' %}

{% block title %}내 체험단 관리{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>내 체험단 관리</h1>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createCampaignModal">
        신규 체험단 등록
    </button>
</div>

{% if campaigns %}
<div class="row g-4">
    {% for campaign in campaigns %}
    <div class="col-md-6 col-lg-4">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">
                    <a href="{% url 'campaigns:advertiser_detail' campaign.id %}" class="text-decoration-none">
                        {{ campaign.name }}
                    </a>
                </h5>

                <p class="text-muted small mb-2">
                    {{ campaign.recruitment_start_date|date:"Y-m-d" }} ~ {{ campaign.recruitment_end_date|date:"Y-m-d" }}
                </p>

                <div class="mb-2">
                    {% if campaign.status == 'recruiting' %}
                        <span class="badge bg-success">모집 중</span>
                    {% elif campaign.status == 'recruitment_ended' %}
                        <span class="badge bg-secondary">모집 종료</span>
                    {% elif campaign.status == 'selection_complete' %}
                        <span class="badge bg-primary">선정 완료</span>
                    {% endif %}
                </div>

                <p class="mb-0">
                    <strong>{{ campaign.proposal_count }}</strong> / {{ campaign.recruitment_count }}명 지원
                </p>
            </div>

            <div class="card-footer">
                <a href="{% url 'campaigns:advertiser_detail' campaign.id %}" class="btn btn-sm btn-outline-primary w-100">
                    상세 보기
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info text-center" role="alert">
    등록된 체험단이 없습니다.
    <br>
    <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#createCampaignModal">
        첫 번째 체험단 등록하기
    </button>
</div>
{% endif %}

{% include 'campaigns/_create_campaign_modal.html' %}

{% endblock %}
